{"ast":null,"code":"import { cartActions } from \"./cart\";\nimport { uiActions } from \"./ui\";\nexport const sendCartData = cart => {\n  return async dispatch => {\n    dispatch(uiActions.showNotification({\n      status: \"pending\",\n      title: \"Sending\",\n      message: \"Sending cart data ... \"\n    }));\n    const sendRequest = async () => {\n      const resp = await fetch(\"https://react-course-backend-18911-default-rtdb.europe-west1.firebasedatabase.app/cart.json\", {\n        method: \"PUT\",\n        body: JSON.stringify({\n          items: cart.items,\n          total: cart.total\n        })\n      });\n      if (!resp.ok) {\n        throw new Error(\"Sending Cart Data failed!\");\n      }\n    };\n    try {\n      await sendRequest();\n      dispatch(uiActions.showNotification({\n        status: \"success\",\n        title: \"Success\",\n        message: \"Cart data sent successfully\"\n      }));\n    } catch (e) {\n      sendCartData().catch(error => {\n        dispatch(uiActions.showNotification({\n          status: \"error\",\n          title: \"Error\",\n          message: \"Sending cart data failed -> \" + error\n        }));\n      });\n    }\n  };\n};\nexport const fetchCartData = () => {\n  return async dispatch => {\n    const fetchData = async () => {\n      const resp = await fetch(\"https://react-course-backend-18911-default-rtdb.europe-west1.firebasedatabase.app/cart.json\");\n      if (!resp.ok) {\n        throw new Error(\"Failed to fetch cart data!\");\n      }\n      const cartData = await resp.json();\n      return cartData;\n    };\n    try {\n      const cartData = await fetchData();\n      dispatch(cartActions.setCart(cartData));\n    } catch (error) {\n      dispatch(uiActions.showNotification({\n        status: \"error\",\n        title: \"Error\",\n        message: \"Fetching cart data failed -> \" + error\n      }));\n      return;\n    }\n  };\n};","map":{"version":3,"names":["cartActions","uiActions","sendCartData","cart","dispatch","showNotification","status","title","message","sendRequest","resp","fetch","method","body","JSON","stringify","items","total","ok","Error","e","catch","error","fetchCartData","fetchData","cartData","json","setCart"],"sources":["C:/Users/PatrickClaassens/OneDrive/React Course/React-Udemy-Course/Section-21-Advanced-Redux/src/store/cart-actions.js"],"sourcesContent":["import { cartActions } from \"./cart\";\r\nimport { uiActions } from \"./ui\";\r\n\r\nexport const sendCartData = (cart) => {\r\n  return async (dispatch) => {\r\n    dispatch(\r\n      uiActions.showNotification({\r\n        status: \"pending\",\r\n        title: \"Sending\",\r\n        message: \"Sending cart data ... \",\r\n      })\r\n    );\r\n\r\n    const sendRequest = async () => {\r\n      const resp = await fetch(\r\n        \"https://react-course-backend-18911-default-rtdb.europe-west1.firebasedatabase.app/cart.json\",\r\n        {\r\n          method: \"PUT\",\r\n          body: JSON.stringify({items: cart.items, total: cart.total}),\r\n        }\r\n      );\r\n\r\n      if (!resp.ok) {\r\n        throw new Error(\"Sending Cart Data failed!\");\r\n      }\r\n    };\r\n\r\n    try {\r\n      await sendRequest();\r\n      dispatch(\r\n        uiActions.showNotification({\r\n          status: \"success\",\r\n          title: \"Success\",\r\n          message: \"Cart data sent successfully\",\r\n        })\r\n      );\r\n    } catch (e) {\r\n      sendCartData().catch((error) => {\r\n        dispatch(\r\n          uiActions.showNotification({\r\n            status: \"error\",\r\n            title: \"Error\",\r\n            message: \"Sending cart data failed -> \" + error,\r\n          })\r\n        );\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const fetchCartData = () => {\r\n  return async (dispatch) => {\r\n    const fetchData = async () => {\r\n      const resp = await fetch(\r\n        \"https://react-course-backend-18911-default-rtdb.europe-west1.firebasedatabase.app/cart.json\"\r\n      );\r\n\r\n      if (!resp.ok) {\r\n        throw new Error(\"Failed to fetch cart data!\");\r\n      }\r\n\r\n      const cartData = await resp.json();\r\n\r\n      return cartData;\r\n    };\r\n\r\n    try {\r\n      const cartData = await fetchData();\r\n      dispatch(cartActions.setCart(cartData));\r\n    } catch (error) {\r\n      dispatch(\r\n        uiActions.showNotification({\r\n          status: \"error\",\r\n          title: \"Error\",\r\n          message: \"Fetching cart data failed -> \" + error,\r\n        })\r\n      );\r\n      return;\r\n    }\r\n  };\r\n};\r\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,QAAQ;AACpC,SAASC,SAAS,QAAQ,MAAM;AAEhC,OAAO,MAAMC,YAAY,GAAIC,IAAI,IAAK;EACpC,OAAO,MAAOC,QAAQ,IAAK;IACzBA,QAAQ,CACNH,SAAS,CAACI,gBAAgB,CAAC;MACzBC,MAAM,EAAE,SAAS;MACjBC,KAAK,EAAE,SAAS;MAChBC,OAAO,EAAE;IACX,CAAC,CACH,CAAC;IAED,MAAMC,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC9B,MAAMC,IAAI,GAAG,MAAMC,KAAK,CACtB,6FAA6F,EAC7F;QACEC,MAAM,EAAE,KAAK;QACbC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAACC,KAAK,EAAEb,IAAI,CAACa,KAAK;UAAEC,KAAK,EAAEd,IAAI,CAACc;QAAK,CAAC;MAC7D,CACF,CAAC;MAED,IAAI,CAACP,IAAI,CAACQ,EAAE,EAAE;QACZ,MAAM,IAAIC,KAAK,CAAC,2BAA2B,CAAC;MAC9C;IACF,CAAC;IAED,IAAI;MACF,MAAMV,WAAW,CAAC,CAAC;MACnBL,QAAQ,CACNH,SAAS,CAACI,gBAAgB,CAAC;QACzBC,MAAM,EAAE,SAAS;QACjBC,KAAK,EAAE,SAAS;QAChBC,OAAO,EAAE;MACX,CAAC,CACH,CAAC;IACH,CAAC,CAAC,OAAOY,CAAC,EAAE;MACVlB,YAAY,CAAC,CAAC,CAACmB,KAAK,CAAEC,KAAK,IAAK;QAC9BlB,QAAQ,CACNH,SAAS,CAACI,gBAAgB,CAAC;UACzBC,MAAM,EAAE,OAAO;UACfC,KAAK,EAAE,OAAO;UACdC,OAAO,EAAE,8BAA8B,GAAGc;QAC5C,CAAC,CACH,CAAC;MACH,CAAC,CAAC;IACJ;EACF,CAAC;AACH,CAAC;AAED,OAAO,MAAMC,aAAa,GAAGA,CAAA,KAAM;EACjC,OAAO,MAAOnB,QAAQ,IAAK;IACzB,MAAMoB,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B,MAAMd,IAAI,GAAG,MAAMC,KAAK,CACtB,6FACF,CAAC;MAED,IAAI,CAACD,IAAI,CAACQ,EAAE,EAAE;QACZ,MAAM,IAAIC,KAAK,CAAC,4BAA4B,CAAC;MAC/C;MAEA,MAAMM,QAAQ,GAAG,MAAMf,IAAI,CAACgB,IAAI,CAAC,CAAC;MAElC,OAAOD,QAAQ;IACjB,CAAC;IAED,IAAI;MACF,MAAMA,QAAQ,GAAG,MAAMD,SAAS,CAAC,CAAC;MAClCpB,QAAQ,CAACJ,WAAW,CAAC2B,OAAO,CAACF,QAAQ,CAAC,CAAC;IACzC,CAAC,CAAC,OAAOH,KAAK,EAAE;MACdlB,QAAQ,CACNH,SAAS,CAACI,gBAAgB,CAAC;QACzBC,MAAM,EAAE,OAAO;QACfC,KAAK,EAAE,OAAO;QACdC,OAAO,EAAE,+BAA+B,GAAGc;MAC7C,CAAC,CACH,CAAC;MACD;IACF;EACF,CAAC;AACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}