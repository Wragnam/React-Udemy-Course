{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport { uiActions } from \"./ui\";\nconst initialCartState = {\n  items: [],\n  total: 0\n};\nconst cartSlice = createSlice({\n  name: \"cart\",\n  initialState: initialCartState,\n  reducers: {\n    addToCart(state, action) {\n      const existingCartItem = state.items.find(item => item.id === action.payload.id);\n      if (existingCartItem) {\n        existingCartItem.quantity += 1;\n        existingCartItem.total += action.payload.price;\n      } else {\n        state.items.push({\n          ...action.payload,\n          quantity: 1,\n          total: action.payload.price\n        });\n      }\n      state.total += 1;\n    },\n    increase(state, action) {\n      const existingCartItem = state.items.find(item => item.id === action.payload);\n      existingCartItem.total += existingCartItem.price;\n      existingCartItem.quantity += 1;\n      state.total += 1;\n    },\n    decrease(state, action) {\n      const existingCartItem = state.items.find(item => item.id === action.payload);\n      if (existingCartItem.quantity === 1) {\n        state.items = state.items.filter(item => item.id !== action.payload);\n      } else {\n        existingCartItem.quantity -= 1;\n        existingCartItem.total -= existingCartItem.price;\n      }\n      state.total -= 1;\n    }\n  }\n});\nconst sendCartData = cart => {\n  return async dispatch => {\n    dispatch(uiActions.showNotification({\n      status: \"pending\",\n      title: \"Sending\",\n      message: \"Sending cart data ... \"\n    }));\n    const sendRequest = async () => {\n      const resp = await fetch(\"https://react-course-backend-18911-default-rtdb.europe-west1.firebasedatabase.app/cart.json\", {\n        method: \"PUT\",\n        body: JSON.stringify(cart)\n      });\n      if (!resp.ok) {\n        throw new Error(\"Sending Cart Data failed!\");\n      }\n    };\n    try {\n      await sendRequest();\n      dispatch(uiActions.showNotification({\n        status: \"success\",\n        title: \"Success\",\n        message: \"Cart data sent successfully\"\n      }));\n    } catch (e) {\n      sendCartData().catch(error => {\n        dispatch(uiActions.showNotification({\n          status: \"error\",\n          title: \"Error\",\n          message: \"Sending cart data failed -> \" + error\n        }));\n      });\n    }\n  };\n};\nexport default cartSlice.reducer;\nexport const cartActions = cartSlice.actions;","map":{"version":3,"names":["createSlice","uiActions","initialCartState","items","total","cartSlice","name","initialState","reducers","addToCart","state","action","existingCartItem","find","item","id","payload","quantity","price","push","increase","decrease","filter","sendCartData","cart","dispatch","showNotification","status","title","message","sendRequest","resp","fetch","method","body","JSON","stringify","ok","Error","e","catch","error","reducer","cartActions","actions"],"sources":["C:/Users/PatrickClaassens/OneDrive/React Course/React-Udemy-Course/Section-21-Advanced-Redux/src/store/cart.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { uiActions } from \"./ui\";\r\n\r\nconst initialCartState = { items: [], total: 0 };\r\nconst cartSlice = createSlice({\r\n  name: \"cart\",\r\n  initialState: initialCartState,\r\n  reducers: {\r\n    addToCart(state, action) {\r\n      const existingCartItem = state.items.find(\r\n        (item) => item.id === action.payload.id\r\n      );\r\n      if (existingCartItem) {\r\n        existingCartItem.quantity += 1;\r\n        existingCartItem.total += action.payload.price;\r\n      } else {\r\n        state.items.push({\r\n          ...action.payload,\r\n          quantity: 1,\r\n          total: action.payload.price,\r\n        });\r\n      }\r\n      state.total += 1;\r\n    },\r\n    increase(state, action) {\r\n      const existingCartItem = state.items.find(\r\n        (item) => item.id === action.payload\r\n      );\r\n\r\n      existingCartItem.total += existingCartItem.price;\r\n      existingCartItem.quantity += 1;\r\n      state.total += 1;\r\n    },\r\n    decrease(state, action) {\r\n      const existingCartItem = state.items.find(\r\n        (item) => item.id === action.payload\r\n      );\r\n\r\n      if (existingCartItem.quantity === 1) {\r\n        state.items = state.items.filter((item) => item.id !== action.payload);\r\n      } else {\r\n        existingCartItem.quantity -= 1;\r\n        existingCartItem.total -= existingCartItem.price;\r\n      }\r\n      state.total -= 1;\r\n    },\r\n  },\r\n});\r\n\r\nconst sendCartData = (cart) => {\r\n  return async (dispatch) => {\r\n    dispatch(\r\n      uiActions.showNotification({\r\n        status: \"pending\",\r\n        title: \"Sending\",\r\n        message: \"Sending cart data ... \",\r\n      })\r\n    );\r\n\r\n    const sendRequest = async () => {\r\n      const resp = await fetch(\r\n        \"https://react-course-backend-18911-default-rtdb.europe-west1.firebasedatabase.app/cart.json\",\r\n        {\r\n          method: \"PUT\",\r\n          body: JSON.stringify(cart),\r\n        }\r\n      );\r\n\r\n      if (!resp.ok) {\r\n        throw new Error(\"Sending Cart Data failed!\");\r\n      }\r\n    };\r\n\r\n    try {\r\n      await sendRequest();\r\n      dispatch(\r\n        uiActions.showNotification({\r\n          status: \"success\",\r\n          title: \"Success\",\r\n          message: \"Cart data sent successfully\",\r\n        })\r\n      );\r\n    } catch (e) {\r\n      sendCartData().catch((error) => {\r\n        dispatch(\r\n          uiActions.showNotification({\r\n            status: \"error\",\r\n            title: \"Error\",\r\n            message: \"Sending cart data failed -> \" + error,\r\n          })\r\n        );\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport default cartSlice.reducer;\r\nexport const cartActions = cartSlice.actions;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}